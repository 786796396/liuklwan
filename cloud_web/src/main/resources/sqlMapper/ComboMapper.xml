<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ucap.cloud_web.dao.ComboDao">
	<cache eviction="LRU" flushInterval="60000" size="1024" readOnly="true" />
	<resultMap type="com.ucap.cloud_web.entity.Combo" id="resultMap" />

	<sql id="where">
		<where>
			1=1
			<if test="isValid != null">
				and is_valid=#{isValid}
			</if>
			<if test="comboCodes != null">
				and combo_code in (${comboCodes})
			</if>
		</where>
	</sql>

	<!-- 添加 -->
	<insert id="add" parameterType="com.ucap.cloud_web.entity.Combo"
		useGeneratedKeys="true" keyProperty="id">
		insert into combo (
		<if test="id != null ">id,</if>
		<if test="comboCode != null ">combo_code,</if>
		<if test="remark != null ">remark,</if>
		<if test="indicatorInfo != null ">indicator_info,</if>
		<if test="isValid != null ">is_valid,</if>
		<if test="totalPoints != null ">total_points,</if>
		create_time,
		modify_time
		) values (
		<if test="id != null ">#{id},</if>
		<if test="comboCode != null ">#{comboCode},</if>
		<if test="remark != null ">#{remark},</if>
		<if test="indicatorInfo != null ">#{indicatorInfo},</if>
		<if test="isValid != null ">#{isValid},</if>
		<if test="totalPoints != null ">#{totalPoints},</if>
		now(),
		now()
		)
	</insert>

	<!-- 查询 -->
	<select id="get" parameterType="int" resultType="com.ucap.cloud_web.entity.Combo">
		select * from
		combo where id=#{id}
	</select>

	<!-- 修改 -->
	<update id="update" parameterType="com.ucap.cloud_web.entity.Combo">
		update combo
		<trim prefix="SET" suffixOverrides=",">
			<if test="id != null ">id = #{id},</if>
			<if test="comboCode != null ">combo_code = #{comboCode},</if>
			<if test="remark != null ">remark = #{remark},</if>
			<if test="indicatorInfo != null ">indicator_info = #{indicatorInfo},</if>
			<if test="isValid != null ">is_valid = #{isValid},</if>
			<if test="totalPoints != null ">total_points = #{totalPoints},</if>
			modify_time=now()
		</trim>
		where id=#{id}
	</update>

	<!-- 删除 -->
	<delete id="delete" parameterType="int">
		delete from combo where id =
		#{id}
	</delete>

	<!-- 分页查询 -->
	<select id="query" parameterType="HashMap" resultMap="resultMap">
		select * from combo
		<include refid="where" />
		<if test="queryOrderList != null">
			order by
			<foreach collection="queryOrderList" item="queryOrder"
				separator=",">
				${queryOrder}
			</foreach>
		</if>
		<if test="start != null and pageSize != null">
			limit #{start}, #{pageSize}
		</if>
	</select>
	<select id="queryCount" parameterType="HashMap" resultType="int">
		select count(*) from combo
		<include refid="where" />
	</select>


</mapper>
