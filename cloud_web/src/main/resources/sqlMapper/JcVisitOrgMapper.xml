<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.ucap.cloud_web.dao.JcVisitOrgDao">	<cache eviction="LRU" flushInterval="60000" size="1024" readOnly="true"/>	<resultMap type="com.ucap.cloud_web.entity.JcVisitOrg" id="resultMap"/>	<sql id="where">		<where>			1=1			<if test="siteCode != null">				and site_code = #{siteCode}			</if>			<if test="endDate != null">				and scan_date >= #{endDate}			</if>		</where>	</sql>	<!-- 添加 -->	<insert id="add" parameterType="com.ucap.cloud_web.entity.JcVisitOrg" useGeneratedKeys="true" keyProperty="id">		insert into jc_visit_org ( 			<if test="id != null ">id,</if>			<if test="siteCode != null ">site_code,</if>			<if test="labelingPercent != null ">labeling_percent,</if>			<if test="pvAvg != null ">pv_avg,</if>			<if test="uvAvg != null ">uv_avg,</if>			<if test="pv != null ">pv,</if>			<if test="uv != null ">uv,</if>			<if test="scanDate != null ">scan_date,</if>			<if test="siteCnt != null ">site_cnt,</if>			create_time,			modify_time		) values (			<if test="id != null ">#{id},</if>			<if test="siteCode != null ">#{siteCode},</if>			<if test="labelingPercent != null ">#{labelingPercent},</if>			<if test="pvAvg != null ">#{pvAvg},</if>			<if test="uvAvg != null ">#{uvAvg},</if>			<if test="pv != null ">#{pv},</if>			<if test="uv != null ">#{uv},</if>			<if test="scanDate != null ">#{scanDate},</if>			<if test="siteCnt != null ">#{siteCnt},</if>			now(),			now()		)		<selectKey resultType="int" keyProperty="id">			SELECT LAST_INSERT_ID() AS id		</selectKey>	</insert>	<!-- 查询 -->	<select id="get" parameterType="int" resultType="com.ucap.cloud_web.entity.JcVisitOrg">		select * from jc_visit_org where id=#{id}	</select>	<!-- 修改 -->	<update id="update" parameterType="com.ucap.cloud_web.entity.JcVisitOrg">		update jc_visit_org 			<trim prefix="SET" suffixOverrides=",">				<if test="id != null ">id = #{id},</if>				<if test="siteCode != null ">site_code = #{siteCode},</if>				<if test="labelingPercent != null ">labeling_percent = #{labelingPercent},</if>				<if test="pvAvg != null ">pv_avg = #{pvAvg},</if>				<if test="uvAvg != null ">uv_avg = #{uvAvg},</if>				<if test="pv != null ">pv = #{pv},</if>				<if test="uv != null ">uv = #{uv},</if>				<if test="scanDate != null ">scan_date = #{scanDate},</if>				<if test="siteCnt != null ">site_cnt = #{siteCnt},</if>				<if test="createTime != null ">create_time = #{createTime},</if>				<if test="modifyTime != null ">modify_time = #{modifyTime},</if>			</trim>			where id=#{id} 	</update>	<!-- 删除 -->	<delete id="delete" parameterType="int">		delete from jc_visit_org where id = #{id}	</delete>	<!-- 分页查询 -->	<select id="query" parameterType="HashMap" resultMap="resultMap">		select * from jc_visit_org		<include refid="where"/>		<if test="queryOrderList != null">			order by			<foreach collection="queryOrderList" item="queryOrder" separator=",">				${queryOrder}			</foreach>		</if>		<if test="start != null and pageSize != null">			limit #{start}, #{pageSize}		</if>	</select>	<select id="queryCount" parameterType="HashMap" resultType="int">		select count(*) from jc_visit_org		<include refid="where" />	</select>		<select id="getOrgData" parameterType="HashMap" resultType="com.ucap.cloud_web.entity.JcVisitOrg">		select j.*,org.name from database_tree_info d 			join jc_visit_org j  on d.site_code = j.site_code 			join database_org_info org  on org.site_code = d.site_code 			where d.parent_id = #{parentId} and LENGTH(d.site_code) = 6 			<if test="scanDate != null "> and scan_date = #{scanDate}</if>			<if test="isBm != null "> and is_bm = #{isBm}</if>			and d.is_bigdata=1	</select>
</mapper>
