<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ucap.cloud_web.dao.TaskDailyDao">
<cache eviction="LRU" flushInterval="60000" size="1024" readOnly="true"/>
	<resultMap type="com.ucap.cloud_web.entity.TaskDaily" id="resultMap"/>

	<sql id="where">
		<where>
			1=1
			<if test="siteCode != null">
				and site_code=#{siteCode}
			</if>
			<if test="websiteInfoId != null">
				and website_info_id=#{websiteInfoId}
			</if>
			<if test="ids != null">
                 and site_code in
                <foreach collection="ids" item="term" open="(" separator="," close=")">
                           #{term.siteCode}
                </foreach>
            </if>
		</where>
	</sql>

	<!-- 添加 -->
	<insert id="add" parameterType="com.ucap.cloud_web.entity.TaskDaily"
		useGeneratedKeys="true" keyProperty="id">
		insert into task_daily (
		<if test="id != null ">id,</if>
		<if test="websiteInfoId != null ">website_info_id,</if>
		<if test="siteCode != null ">site_code,</if>
		<if test="startDate != null ">start_date,</if>
		<if test="endDate != null ">end_date,</if>
		<if test="startStatus != null ">start_status,</if>
		<if test="fetchStatus != null ">fetch_status,</if>
		<if test="isStart != null ">is_start,</if>
		<if test="startTime != null ">start_time,</if>
		<if test="startTimes != null ">start_times,</if>
		<if test="fetchTime != null ">fetch_time,</if>
		<if test="fetchTimes != null ">fetch_times,</if>
		<if test="currentLockId != null ">#{current_lock_id},</if>
		<if test="isScan != null ">is_scan,</if>
		create_time
		) values (
		<if test="id != null ">#{id},</if>
		<if test="websiteInfoId != null ">#{websiteInfoId},</if>
		<if test="siteCode != null ">#{siteCode},</if>
		<if test="startDate != null ">#{startDate},</if>
		<if test="endDate != null ">#{endDate},</if>
		<if test="startStatus != null ">#{startStatus},</if>
		<if test="fetchStatus != null ">#{fetchStatus},</if>
		<if test="isStart != null ">#{isStart},</if>
		<if test="startTime != null ">#{startTime},</if>
		<if test="startTimes != null ">#{startTimes},</if>
		<if test="fetchTime != null ">#{fetchTime},</if>
		<if test="fetchTimes != null ">#{fetchTimes},</if>
		<if test="currentLockId != null ">#{currentLockId},</if>
		<if test="isScan != null ">#{isScan},</if>
		now()
		)
	</insert>

	<!-- 查询 -->
	<select id="get" parameterType="int"
		resultType="com.ucap.cloud_web.entity.TaskDaily">
		select * from task_daily where id=#{id}
	</select>

	<!-- 修改 -->
	<update id="update" parameterType="com.ucap.cloud_web.entity.TaskDaily">
		update task_daily
		<trim prefix="SET" suffixOverrides=",">
			<if test="id != null ">id = #{id},</if>
			<if test="websiteInfoId != null ">website_info_id = #{websiteInfoId},</if>
			<if test="siteCode != null ">site_code = #{siteCode},</if>
			<if test="startDate != null ">start_date = #{startDate},</if>
			<if test="endDate != null ">end_date = #{endDate},</if>
			<if test="startStatus != null ">start_status = #{startStatus},</if>
			<if test="fetchStatus != null ">fetch_status = #{fetchStatus},</if>
			<if test="isStart != null ">is_start = #{isStart},</if>
			<if test="startTime != null ">start_time = #{startTime},</if>
			<if test="startTimes != null ">start_times = #{startTimes},</if>
			<if test="fetchTime != null ">fetch_time = #{fetchTime},</if>
			<if test="fetchTimes != null ">fetch_times = #{fetchTimes},</if>
			<if test="currentLockId != null ">current_lock_id = #{currentLockId},</if>
			<if test="modifyTime != null ">modify_time = #{modifyTime},</if>
			<if test="isScan != null ">is_scan=#{isScan}</if>
		</trim>
		where id=#{id}
	</update>
	<!-- 删除 -->
	<delete id="delete" parameterType="int">
		delete from task_daily where id = #{id}
	</delete>

	<!-- 分页查询 -->
	<select id="query" parameterType="HashMap" resultMap="resultMap">
		select * from task_daily
		<include refid="where"/>
		<if test="queryOrderList != null">
			order by
			<foreach collection="queryOrderList" item="queryOrder" separator=",">
				${queryOrder}
			</foreach>
		</if>
		<if test="start != null and pageSize != null">
			limit #{start}, #{pageSize}
		</if>
	</select>
	<select id="queryCount" parameterType="HashMap" resultType="int">
		select count(*) from task_daily
		<include refid="where" />
	</select>
	

</mapper>
